!function(t){var e={};function s(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=e,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=1)}([,function(t,e,s){"use strict";s.r(e);class a{constructor({keyboard:t=".mj-keyboard",opener:e=".mj-kb-open",placeAfter:s=".mj-keyboard",tiles:a={"1m":"&#126983;","2m":"&#126984;","3m":"&#126985;","4m":"&#126986;","5m":"&#126987;","6m":"&#126988;","7m":"&#126989;","8m":"&#126990;","9m":"&#126991;","1p":"&#127001;","2p":"&#127002;","3p":"&#127003;","4p":"&#127004;","5p":"&#127005;","6p":"&#127006;","7p":"&#127007;","8p":"&#127008;","9p":"&#127009;","1s":"&#126992;","2s":"&#126993;","3s":"&#126994;","4s":"&#126995;","5s":"&#126996;","6s":"&#126997;","7s":"&#126998;","8s":"&#126999;","9s":"&#127000;","1z":"&#126976;","2z":"&#126977;","3z":"&#126978;","4z":"&#126979;","5z":"&#126982;","6z":"&#126981;","7z":"&#126980;"}}){this.keyboard=t,this.opener=e,this.placeAfter=s,this.tiles=a,this.suits=["m","p","s","z"],this.states=[]}init(){const t=document.querySelector(this.keyboard);if(!t)return;const e=document.querySelector(this.opener);if(!e)return;let s=t;if(this.keyboard!==this.placeAfter&&(s=document.querySelector(this.placeAfter),!s))return;let a=document.createElement("div");a.classList.add("mj-kb-layout"),a.classList.add("mj-kb-hide");const i=`\n        <table class="mj-kb-table">\n        <tbody>\n            <tr>\n                <td><a class="mj-kb-tile" data-tile="1m">${this.tiles["1m"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="2m">${this.tiles["2m"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="3m">${this.tiles["3m"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="4m">${this.tiles["4m"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="5m">${this.tiles["5m"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="6m">${this.tiles["6m"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="7m">${this.tiles["7m"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="8m">${this.tiles["8m"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="9m">${this.tiles["9m"]}</a></td>\n            </tr>\n            <tr>\n                <td><a class="mj-kb-tile" data-tile="1p">${this.tiles["1p"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="2p">${this.tiles["2p"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="3p">${this.tiles["3p"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="4p">${this.tiles["4p"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="5p">${this.tiles["5p"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="6p">${this.tiles["6p"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="7p">${this.tiles["7p"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="8p">${this.tiles["8p"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="9p">${this.tiles["9p"]}</a></td>\n            </tr>\n            <tr>\n                <td><a class="mj-kb-tile" data-tile="1s">${this.tiles["1s"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="2s">${this.tiles["2s"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="3s">${this.tiles["3s"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="4s">${this.tiles["4s"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="5s">${this.tiles["5s"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="6s">${this.tiles["6s"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="7s">${this.tiles["7s"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="8s">${this.tiles["8s"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="9s">${this.tiles["9s"]}</a></td>\n            </tr>\n            <tr>\n                <td><a class="mj-kb-tile" data-tile="1z">${this.tiles["1z"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="2z">${this.tiles["2z"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="3z">${this.tiles["3z"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="4z">${this.tiles["4z"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="5z">${this.tiles["5z"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="6z">${this.tiles["6z"]}</a></td>\n                <td><a class="mj-kb-tile" data-tile="7z">${this.tiles["7z"]}</a></td>\n                <td class="mj-kb-undo"><a>&#8630;</a></td>\n                <td class="mj-kb-clear"><a>&#10799;</a></td>\n            </tr>\n        </tbody>\n        </table>\n        `;a.innerHTML=i,s.insertAdjacentElement("afterend",a),e.addEventListener("click",t=>{t.preventDefault();const e=document.querySelector(".mj-kb-layout");return e.classList.contains("mj-kb-hide")?e.classList.remove("mj-kb-hide"):e.classList.add("mj-kb-hide"),!1}),a.querySelectorAll("a.mj-kb-tile").forEach(e=>{e.addEventListener("click",s=>{let a=this.splitHand(t.value);13===this.countHandObject(a)?t.value=this.joinHand(a)+e.getAttribute("data-tile"):(a=this.addToHandObject(a,e.getAttribute("data-tile")),t.value=this.joinHand(a)),this.states.push(t.value),t.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0}))})}),a.querySelector(".mj-kb-clear a").addEventListener("click",e=>{t.value="",this.states=[],t.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0}))}),a.querySelector(".mj-kb-undo a").addEventListener("click",e=>{this.states.pop(),t.value=this.states.slice(-1),t.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0}))})}splitHand(t){const e=t.length-1;let s=null,a=[];for(let i=e;i>=0;i--)!Number.isInteger(parseInt(t[i]))&&this.suits.includes(t[i])?s=t[i]:Number.isInteger(parseInt(t[i]))&&null!==s&&(s in a?a[s].push(parseInt(t[i])):a[s]=[parseInt(t[i])]);return this.suits.forEach(t=>{t in a&&a[t].sort()}),a}joinHand(t){let e="";return this.suits.forEach(s=>{if(s in t){for(let a=0;a<t[s].length;a++)e+=t[s][a];e+=s}}),e}addToHandObject(t,e){const s=e.substr(1,1),a=parseInt(e.substr(0,1));return this.suits.includes(s)&&(s in t?(t[s].push(a),t[s].sort()):t[s]=[a]),t}countHandObject(t){let e=0;return this.suits.forEach(s=>{s in t&&(e+=t[s].length)}),e}}window.addEventListener("DOMContentLoaded",()=>{new a({placeAfter:".mj-kb-open"}).init()})}]);